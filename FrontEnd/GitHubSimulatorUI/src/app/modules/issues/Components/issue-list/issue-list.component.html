<div class="table-controls">
  <button mat-button><mat-icon>adjust</mat-icon> 7 Open</button>
  <button mat-button><mat-icon>check</mat-icon> 21 Closed</button>

  <button mat-button [matMenuTriggerFor]="author">Author<mat-icon iconPositionEnd>arrow_drop_down</mat-icon></button>
  <mat-menu #author="matMenu">
    <input type="text" placeholder="Filter Users" mat-menu-item (click)="$event.stopPropagation();">
    <mat-divider></mat-divider>
    <button mat-menu-item>
      <span>Test Author</span>
    </button>
  </mat-menu>

  <button mat-button [matMenuTriggerFor]="labels">Label<mat-icon iconPositionEnd>arrow_drop_down</mat-icon></button>
  <mat-menu #labels="matMenu">
    <input type="text" placeholder="Filter Labels" mat-menu-item (click)="$event.stopPropagation();">
    <mat-divider></mat-divider>
    <button mat-menu-item>
      <span>Unlabeled</span>
    </button>
    <button mat-menu-item>
      <span>Test Label</span>
    </button>
  </mat-menu>

  <button mat-button [matMenuTriggerFor]="milestones">Milestones<mat-icon iconPositionEnd>arrow_drop_down</mat-icon></button>
  <mat-menu #milestones="matMenu">
    <input type="text" placeholder="Filter Milestones" mat-menu-item (click)="$event.stopPropagation();">
    <mat-divider></mat-divider>
    <button mat-menu-item>
      <span>Issues with no milestone</span>
    </button>
    <button mat-menu-item>
      <span>Test Milestone</span>
    </button>
  </mat-menu>

  <button mat-button [matMenuTriggerFor]="assignee">Assignee<mat-icon iconPositionEnd>arrow_drop_down</mat-icon></button>
  <mat-menu #assignee="matMenu">
    <input type="text" placeholder="Filter Users" mat-menu-item (click)="$event.stopPropagation();">
    <mat-divider></mat-divider>
    <button mat-menu-item>
      <span>Assigned to nobody</span>
    </button>
    <button mat-menu-item>
      <span>Test Assignee</span>
    </button>
  </mat-menu>

  <button mat-button [matMenuTriggerFor]="sorting">Sort<mat-icon iconPositionEnd>arrow_drop_down</mat-icon></button>
  <mat-menu #sorting="matMenu">
      <p mat-menu-item disabled>Sort By</p>
      <mat-divider></mat-divider>

      <button mat-menu-item>
        <span>Newest</span>
      </button>
      <mat-divider></mat-divider>

      <button mat-menu-item>
        <span>Oldest</span>
      </button>
      <mat-divider></mat-divider>

      <button mat-menu-item>
        <span>Most Commented</span>
      </button>
      <mat-divider></mat-divider>

      <button mat-menu-item>
        <span>Least Commented</span>
      </button>
      <mat-divider></mat-divider>

      <button mat-menu-item>
        <span>Recently Updated</span>
      </button>

      <button mat-menu-item>
        <span>Least Recently Updated</span>
      </button>

      <button mat-menu-item>
        <span>Best Match</span>
      </button>
    </mat-menu>

</div>

<mat-divider style="width: 90%; margin: auto;"/>
<div class="users-table">
  <table mat-table [dataSource]="allIssues">
    <ng-container matColumnDef="title">
      <td mat-cell *matCellDef="let element" class="users-table-cell">
        <div>
          <a [routerLink]="['/issue-details']" [queryParams]="{ id: element.id }" class="link-on-hover">
          <mat-icon matPrefix class="green-icon" *ngIf="isDone">adjust</mat-icon>
          <mat-icon matPrefix class="purple-icon" *ngIf="!isDone">check_circle_outline</mat-icon>
          &nbsp;&nbsp;&nbsp;&nbsp;<span class="issueTitle">{{ element.title }}</span>
        </a>
        </div>
        <div>
          &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;#{{getIssueNumber(element)}} &nbsp;created at: {{getFormatedDate(element)}} &nbsp;by <a (click)="filterUser()" class="link-on-hover">{{getAuthor(element)}}</a> &nbsp;<span *ngIf="issueMilestones[element.id] | async as milestoneResult"><span *ngIf="milestoneResult !== 'Not assigned to any milestone'"><mat-icon>check_circle</mat-icon>&nbsp;<a (click)="filterMilestone()" class="link-on-hover">{{ issueMilestones[element.id] | async }}</a></span></span><span *ngIf="(issueMilestones[element.id] | async) === 'Not assigned to any milestone'"><mat-icon>check_circle</mat-icon>&nbsp;Not assigned to any milestone</span>
        </div>
      </td>
    </ng-container>

    <ng-container matColumnDef="assignee">
      <td mat-cell *matCellDef="let element" class="users-table-cell">{{element.assigne.email}}</td>
    </ng-container>

    <tr mat-row *matRowDef="let row; columns: displayedColumns" ></tr>
  </table>
</div>